diff --git a/src/buffer.zig b/src/buffer.zig
index 0f31b8e..4db9daa 100644
--- a/src/buffer.zig
+++ b/src/buffer.zig
@@ -83,6 +83,7 @@ pub const Buffer = struct {
     uncommitted_changes: std.array_list.Aligned(cha.Change, null) = .empty,
     lsp_connections: std.array_list.Aligned(*lsp.LspConnection, null) = .empty,
     scratch: bool = false,
+    highlights: std.array_list.Aligned(Span, null) = .empty,
     allocator: Allocator,
 
     pub fn init(allocator: Allocator, uri: []const u8) !Buffer {
@@ -170,6 +171,7 @@ pub const Buffer = struct {
         self.line_positions.deinit(self.allocator);
         self.line_byte_positions.deinit(self.allocator);
         self.indents.deinit(self.allocator);
+        self.highlights.deinit(self.allocator);
 
         for (self.history.items) |*i| {
             for (i.items) |*c| c.deinit();
@@ -406,7 +408,7 @@ pub const Buffer = struct {
         main.editor.dirty.completion = true;
     }
 
-    pub fn commitChanges(self: *Buffer) FatalError!void {
+    pub fn commitChanges(self: *Buffer) !void {
         if (self.uncommitted_changes.items.len == 0) {
             log.debug(@This(), "no changes to commit\n", .{});
             return;
@@ -628,6 +630,24 @@ pub const Buffer = struct {
         return self.content_raw.items[bs.start..bs.end];
     }
 
+    pub fn goToDefinition(self: *Buffer) !void {
+        for (self.lsp_connections.items) |conn| {
+            try conn.goToDefinition();
+        }
+    }
+
+    pub fn findReferences(self: *Buffer) !void {
+        for (self.lsp_connections.items) |conn| {
+            try conn.findReferences();
+        }
+    }
+
+    pub fn showHover(self: *Buffer) !void {
+        for (self.lsp_connections.items) |conn| {
+            try conn.hover();
+        }
+    }
+
     pub fn renamePrompt(self: *Buffer) !void {
         const cmd = &main.editor.command_line;
         const line = self.lineContent(@intCast(self.cursor.row));
diff --git a/src/color.zig b/src/color.zig
index f6ee63d..42478e5 100644
--- a/src/color.zig
+++ b/src/color.zig
@@ -84,6 +84,7 @@ pub const Attr = union(enum) {
 pub const attributes = enum {
     pub const text = &[_]Attr{.{ .fg = color.white }};
     pub const selection = &[_]Attr{.{ .bg = color.gray3 }};
+    pub const highlight = &[_]Attr{.{ .bg = color.gray3 }};
     pub const keyword = &[_]Attr{.{ .fg = color.magenta }};
     pub const string = &[_]Attr{.{ .fg = color.green }};
     pub const literal = &[_]Attr{.{ .fg = color.yellow }};
diff --git a/src/lsp.zig b/src/lsp.zig
index 015292e..011b809 100644
--- a/src/lsp.zig
+++ b/src/lsp.zig
@@ -9,6 +9,7 @@ const buf = @import("buffer.zig");
 const cha = @import("change.zig");
 const core = @import("core.zig");
 const Cursor = core.Cursor;
+const Span = core.Span;
 const fs = @import("fs.zig");
 const log = @import("log.zig");
 const main = @import("main.zig");
@@ -93,6 +94,7 @@ pub const LspConnection = struct {
                 .rename = .{
                     .prepareSupport = true,
                 },
+                .documentHighlight = .{},
             },
             .workspace = .{
                 .workspaceFolders = true,
@@ -185,6 +187,8 @@ pub const LspConnection = struct {
                         try self.handleHoverResponse(arena.allocator(), response_result);
                     } else if (std.mem.eql(u8, method, "textDocument/rename")) {
                         try self.handleRenameResponse(arena.allocator(), response_result);
+                    } else if (std.mem.eql(u8, method, "textDocument/documentHighlight")) {
+                        try self.handleHighlightResponse(arena.allocator(), response_result);
                     }
                 },
                 .notification => |notif| {
@@ -236,6 +240,14 @@ pub const LspConnection = struct {
         });
     }
 
+    pub fn highlight(self: *LspConnection) !void {
+        const buffer = main.editor.active_buffer;
+        try self.sendRequest("textDocument/documentHighlight", .{
+            .textDocument = .{ .uri = buffer.uri },
+            .position = buffer.cursor.toLsp(),
+        });
+    }
+
     pub fn rename(self: *LspConnection, new_name: []const u8) !void {
         if ((self.server_init orelse return).value.capabilities.renameProvider == null) return;
         const buffer = main.editor.active_buffer;
@@ -521,6 +533,20 @@ pub const LspConnection = struct {
         try main.editor.applyWorkspaceEdit(result.value);
     }
 
+    fn handleHighlightResponse(self: *LspConnection, arena: Allocator, resp: ?std.json.Value) !void {
+        if (resp == null or resp.? == .null) return;
+        const result = try std.json.parseFromValue([]const types.DocumentHighlight, arena, resp.?, .{});
+        const buffer = main.editor.active_buffer;
+        buffer.highlights.clearRetainingCapacity();
+        for (result.value) |hi| {
+            try buffer.highlights.append(self.allocator, Span.fromLsp(hi.range));
+        }
+        if (buffer.highlights.items.len > 0) {
+            log.debug(@This(), "got {} highlights\n", .{buffer.highlights.items.len});
+            main.editor.dirty.draw = true;
+        }
+    }
+
     fn handleNotification(self: *LspConnection, arena: Allocator, notif: lsp.JsonRPCMessage.Notification) !void {
         log.trace(@This(), "notification: {s}\n", .{notif.method});
         if (std.mem.eql(u8, notif.method, "window/logMessage")) {
diff --git a/src/main.zig b/src/main.zig
index 066118d..5b1ae97 100644
--- a/src/main.zig
+++ b/src/main.zig
@@ -515,6 +515,16 @@ pub fn startEditor(allocator: std.mem.Allocator) FatalError!void {
             term.draw() catch |e| log.err(@This(), "draw error: {}\n", .{e});
         } else if (editor.dirty.cursor) {
             editor.dirty.cursor = false;
+            term.updateCursor() catch |e| log.err(@This(), "update cursor error: {}", .{e});
+
+            if (buffer.highlights.items.len > 0) {
+                buffer.highlights.clearRetainingCapacity();
+                // redraw next frame to clear invalid highlights
+                editor.dirty.draw = true;
+            }
+            for (buffer.lsp_connections.items) |conn| {
+                conn.highlight() catch |e| log.err(@This(), "highlight LSP error: {}", .{e});
+            }
             term.updateCursor() catch |e| log.err(@This(), "update cursor error: {}\n", .{e});
         }
         perf.draw = timer.lap();
diff --git a/src/terminal.zig b/src/terminal.zig
index f18974d..7bd9602 100644
--- a/src/terminal.zig
+++ b/src/terminal.zig
@@ -212,6 +212,14 @@ pub const Terminal = struct {
                     }
                 }
 
+                if (buffer.mode == .normal) {
+                    for (buffer.highlights.items) |hi| {
+                        if (hi.inRange(.{ .row = buffer_row, .col = buffer_col })) {
+                            try co.attributes.write(co.attributes.highlight, &attrs_writer);
+                        }
+                    }
+                }
+
                 if (buffer.diagnostics.items.len > 0) {
                     for (buffer.diagnostics.items) |diagnostic| {
                         const span = diagnostic.span;
